// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import {Test, console} from "forge-std/Test.sol";
import { ClaimNFT } from "../src/ClaimNFT.sol";

contract ClaimNFTTest is Test {
    ClaimNFT private claimer;

    function setUp() public {
        // Deploy NFT contract
      claimer = new ClaimNFT(0xDf859c81287DD1aAcA02d3F56Eaa4dD3C5615EA3);
    }

    function test_claimValidBlock() public {
      bytes memory blockHeader = hex"f90217a0b4fbadf8ea452b139718e2700dc1135cfc81145031c84b7ab27cd710394f7b38a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347942a65aca4d5fc5b5c859090a6c34d164135398226a00e066f3c2297a5cb300593052617d1bca5946f0caa0635fdb1b85ac7e5236f34a065ba887fcb0826f616d01f736c1d2d677bcabde2f7fc25aa91cfbc0b3bad5cb3a020e3534540caf16378e6e86a2bf1236d9f876d3218fbc03958e6db1c634b2333b9010000000000000000000000000000000000000800000000000000000000000800000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000860b69de81a22b830f4240832fefd882c4448456bfb41598d783010303844765746887676f312e352e31856c696e7578a092c4129a0ae2361b452a9edeece55c12eceeab866316195e3d87fc1b005b664588cd4c55b941cf9015";

      bytes32 l3StateRoot = 0xa8c980126093deea127be104b5ace8eff9c9aeba80aa9896a881f4efb44e8e49;

      bytes[] memory l3StateProof = new bytes[](6);
      l3StateProof[0] = hex"f90211a0b2253e9e16afd097252c055b981a4683022cad256db2cc554c464eaf620e363da091c4ebab7e6b13de183d7fd556f415526111493cc2208077b770bdd95ba0b7e4a02d85bf1acc19b9052092f8181f08e16c8e8a7c9753f5b9ab1774f68932186781a0cb10140d73467be236c3627f6894db5cfda5fb13ce8417410a493e7599f44290a0c18e3e9a11597adb6bc706ae7d5b523b65cb2f8e35c85ef0e615f2d6a1919e71a0ecbb16e28aab7fd384343d896469311a073fdc53b13d0a1a3dd1c3f781e5b6f7a03cff4a200ff6301b36677c89de3c42ebefc00440f53e8acacf709d6a8e975dc1a06a64c2f5004eb8939416e631f86bf4482cf6436269cc4647e69b2c2a4f00bd44a0c1786d15291c50f586c47ab8306906f80b90949ba2d225b518c4aeb1612ddd1fa0764ba364a992141319efc96f8a72f275f0618e83e548c5b3869e3e7e28714958a065086b1ae971302f4a1a37de00d4e527f9f44baba3750811d3a21ab71865dfeba0379ade2a6625c8dda68cdd2d067da2d28135aff0d376071fea3a05279467e219a0904dac3b4dacd9b0589c279671698316b70aebf5918f99a535360462f34c73f4a0fb833572f7d1ecea7a3a79fdfc84a32a22a5089a76cbaaef2276ad7f43c35084a0bd3118976814dc8edc91902acb422e045b477b93f2d8dbab296173b2fc8cef88a0e84699ed579b452d91352e05cd4b2e1bb1a65bbd47cef08968d6dbe0fa1334c280";
      l3StateProof[1] = hex"f90211a0f788df89ccee2e5e0d75431a2390d1e4bca036fde807c29a9e313791bc4f2637a0d6b4194c80139c5113fd6a741e9a358c010441a8d3242ed19652b6719c865d76a0962e81772191f0f8e2def821eb4e409d4f09fde9580a1ef1aa7c1f0642145576a0ccdacb250d358ac3894c24ee08b3711f256f05ed8ca1bc2dc651290bc7c3634ea0fdf059704d49a69ceccab294217fe32bba40df00cf58c6dae6808c2ef20b676ea075189a8b967aff9544f74d117a1c153af5ddc892a88b94c2d481b3e2ba3b3381a08181bb7a45ace788acdc30dc305961122f32e91d98ad6fb4549f9d0e382a9125a071e994c138e8a7e6433c6603d3c3bb012344df6dd91f71204173c17f949cd483a0b9f002192da8f3f7fb1cd47918ec712d9a996bb1062ea744ed4b577eb1fdfed4a0f1544ffc149b5e5eb92d7076f90e03ddd083ff0cee9cce53069762c536f71b36a05f9dbe5473b0a72e040dd2a65a618e4c41cdb8844961d503f81a2fef1dda04b7a05f11eb594055d25d22823a1f82465e0bce4eb92dc7875b10d76b842e9dafbd3aa0c3265c5f8669ab306f524affb55e2fb0389451b0674c1ac727ba92b6c728c429a05567e66a1614d22039fd5d33657feb19adac2b9311a60dd7d49279a8d44e0f69a0fecd9fe7feddcc00ab1cef39b44c46d271ec91e9d6ad43eeae88429cc1467c1da060dc562e97de8216afe0ad90120cdeaf0e28ca2dec8a7e7021dcfb4aa360f34280";
      l3StateProof[2] = hex"f90211a08e382e37b9f70ab9b53fe27c7dee6aba2bfeb05baa6330524a8785a6da3ab1aaa039db323538491db05acf21befd60051a4cb153aea76cf668de9d57dd44e5e485a06c6fe1e17bf9aca52fb8fe572d6f978a6f7191e60a57fac3d7eb810e34e02718a0984c29d9b3306f7af5be9b05d969b5228b4ee5738231e0b0ebaa490fd5cf8041a06df1346d617995512f2790941836a4a6df15e087c5d7bfefbd91ff216f267264a0c6e95475d5bdd6cb210aaaeec7c01d9630d2265f03ac83977d24a47e51b2b926a00de882a23c5a3b72e7604586af53bcc1a7e969ad292e550e09ebdb24df785a58a00974316928dc1e0630d2010b0d30dff010a2dbfd9a7305d4f758c1b029d9de11a0012d60ae0b32f8a7daa87741e69ece5cc55f0bfda405d02633b0b407736b68f7a07173341bc1f191f24deeb097264e8635d9f7e6883707d0621502493eaa3c92eaa00f8954ade17625bbba1d57e1d4a902218a6eed2b082b18c06a8e108143ecf254a088577f0da84c534f83e72b1bda40fd207f9972b3bb6829cf6d1a1bea5d7cc8b2a07ca2e37eadcae67bf347eea9e3e469363eb3e5e84c28ff577b7f84e04a8c445fa0b1f8563b50a5095a96aff7a3f9642b21171c3130e54d27ed32a0ec9beb5e2d4aa04073c6f045e0794f512306ca662d87cf3b0c79fece7b10f1bc4cd144c3d38221a03a23441aa99e8c52ce88a5fe63e305d895a355973ce497149c137a93c0db083280";
      l3StateProof[3] = hex"f90211a0358ab3d6b0dd898a0cc09e8955e1b542724fb9b5a4511b3fcbec7497091313c5a0d8a94c8c2b48299a2cac5aa8f11272b205670e8215650c3b7e7d9abccb50c439a0ab5db2c4c456f9d697cfbc1b30aa71d5ca5ae6fd51d906dfd38529c82c951359a0b3f735dd04a4fb755f374187c2fbe5b965f370950cf8bc110f32072077e58ac2a0d6b9df6f0aabc7844a472b1f7b643a4e921db65560287062e66a11de3bcc2cb0a08b6afa42522ba496da85664935f5ac367ee54d24dd36a8b924eab1cf19d9df7da009406ae437eb4f728be753ce1f630d010e447f98907d160301b7d061d5580266a052d69c812fc3ec51ccaa00a14d0581eee3bbf51b136a5d4464c222908506c826a05ba91ed4642a53a80f788c0b0734fc1170e111e1f6e35b3ff1fd39f99b8cc97aa05cbb9eb0d9bf4edf3f0e65f837008f2722945311d95311df4d61d58b7ee6e80ca0dfbe14b0b67fb277840dfeba2a5650ac942a4e8139bd93e41af09afa20eee773a04187d3310330dc673cddc898d9629a4abacd5dca39e447308c1f2aad1273741da067a79785dce3558315d97795a41a5c9b462e9b849fe3276ee668d9d5f83c51ffa0ff355dbce6527e5c4477981ceb133f1d9448cfda405e8b7351e8fb52b370d058a06940a5deabbc3a315e5260348146c34845899e6cb66af9298c33d5d810443e4aa05511cdb9e6cfb047f651d665717d454cdb26628058a9bff516f5cc4be13c7be080";
      l3StateProof[4] = hex"f89180a07e2405e4cc85936f0809491f23f044267b7fbab91b41ccb0bc19e44e6437e32180a08c130c26d39c54a166c27197e721254f85f8a32e375d111e297bbe27594e0e808080a0018775a5526fdab4587372815b5d7b4dc6e0932da195d9468c0e617fc613af0480808080808080a0a404d300c519b2618c4f211fc502bf52aa752c2c3031e18d16da35faeb993ebe8080";
      l3StateProof[5] = hex"f8679e3d67fe17ae5aca147d12943bf69743e4cd4b510c77dd52d6766711579b59b846f8440180a06ed27f2c19fa35981d02009a33478e05e4c24988dcdfabc002ffeb215fd2718ca05285d5222a53e6b3858df2c09b272bcbe674ab20b2c16bbdac2bc31eaf4720a9";

      bytes[] memory historyProverStorageProof = new bytes[](2);
      historyProverStorageProof[0] = hex"f90211a08096caaf50bfb8630ba99a80260d04a5d05ca1f24ca8fcd680177ccc6605da18a02cb48a97b627fd3c887cac7b8c520c96fd28ba644a2ad1d4fa6d96c024e65165a0b3aa792d4db5f1e58cf7509be0e435f88adf0e96c430d704a02a6486cd4c5f28a084c3ab237a2c6fb338def5384df913e42291ccdd37efc0e90908b3e335c18351a0f321ad192288eda00908814557ee19f83d85329385682170b1b603f7c6b25645a089ad2ea2542392188a0ce08d935affe50a9211fee20314e68804f8e9c9ec916da06c9fee149ded656b0a7953ee94abbb1ee2a2bb9f1249b607da323a84d8ee3271a043e7b2ecccad55bc81289f46d41ddab101f2b364fa0fbbacb3f46f77cf03005fa0deb355063624253b63940151e04ae194843f2d0249aecec4dcafc8460771ff70a05dcedf1c696c4f284a1a9ccf84f79fe62d3e7d169a3a2c59f1a7623e5aa2e490a0996f7966c75548226c74585d94300b25632f68f9501aa72cf33e274a43019841a02261a9e50e9ee2eaa66b56f5f793ad052a80accd718631fcbc293ec31341e2e6a026876a30c99e0cba236f0105ae6a8777cf75c4fab175f5bb10f12dd9b54b9b4ba030f1ec8139182ca9c0cf23cd5904125f80f6dafc619e9e8696fcdfbe30f3aea7a06e61ac4b71218732f48426508e28c5a70a06e0b7ce32c4fc8db0abb8a614ad77a067a6b5e61fa6eb29d63c2cc8559ceb6fa93a77b4c00f0845f067d000dfd1032a80";
      historyProverStorageProof[1] = hex"f9011180a0a9095a25552fe2f417d268540c04d1e5bfb88f4035639f7f27d3b870b45d8ffca006ff36dbd6bcbd85eb13c322b32803c279a2d1a662e35e3b7233fa404f8d527b8080a00c053c8f160b5a4b6f42b547686d2941d368e24ab3204d9b712d12713cfc8175a04a4d21efa6b5d043d44b06221b4afa9a243691368c63065da0174718a451ec7ba0df55dbfcab4478c275ecb8d166d923007f2f84186377770480d04076e3d7b7c880a07179d56ad799eb377923c5ab577f2ca8c3ea0d3966f0c94d926e2e6e5d7fdeda80a0177ed70c0cbc7cb251afdb234e6a02f42a8e652ab2ee4ab205cd91d458576d80a0ae6e15092c78c297c68f4fc51d01ac19a202133c62d64ebd30970329493b7d4480808080";

      bytes[] memory txProof = new bytes[](2);
      txProof[0] = hex"f851a0ca62e9753670e9336f817e00197bc91d05ee388bb65951599131bcfdd89f223680808080808080a07fc420843a16aacaaeeac410319611436870ab628da07640d96610919098564f8080808080808080";
      txProof[1] = hex"f87330b870f86e158512bfb19e608301f8dc94c083e9947cf02b8ffc7d3090ae9aea72df98fd4789056bc75e2d63100000801ca0a254fe085f721c2abe00a2cd244110bfc0df5f4f25461c85d8ab75ebac11eb10a030b7835ba481955b20193a703ebc5fdffeab081d63117199040cdf5a91c68765";

      uint256 txIndex = 0x80;

      claimer.claim(
        blockHeader,
        txIndex,
        l3StateRoot,
        l3StateProof,
        historyProverStorageProof,
        txProof
      );
    }
}
