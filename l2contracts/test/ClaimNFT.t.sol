// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import {Test, console} from "forge-std/Test.sol";
import { ClaimNFT } from "../src/ClaimNFT.sol";

contract ClaimNFTTest is Test {
    ClaimNFT private claimer;

    function setUp() public {
        // Deploy NFT contract
      claimer = new ClaimNFT(0xDf859c81287DD1aAcA02d3F56Eaa4dD3C5615EA3);
    }

    function test_claimValidBlock() public {
      bytes memory blockHeader = hex"f90217a0b4fbadf8ea452b139718e2700dc1135cfc81145031c84b7ab27cd710394f7b38a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347942a65aca4d5fc5b5c859090a6c34d164135398226a00e066f3c2297a5cb300593052617d1bca5946f0caa0635fdb1b85ac7e5236f34a065ba887fcb0826f616d01f736c1d2d677bcabde2f7fc25aa91cfbc0b3bad5cb3a020e3534540caf16378e6e86a2bf1236d9f876d3218fbc03958e6db1c634b2333b9010000000000000000000000000000000000000800000000000000000000000800000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000860b69de81a22b830f4240832fefd882c4448456bfb41598d783010303844765746887676f312e352e31856c696e7578a092c4129a0ae2361b452a9edeece55c12eceeab866316195e3d87fc1b005b664588cd4c55b941cf9015";

      bytes32 l3StateRoot = 0xb8bef4e84e85819f50bc63952f6e7bdc84c2939c011f6c5adf441e98c82c1db0;

      bytes[] memory l3StateProof = new bytes[](6);
      l3StateProof[0] = hex"f90211a03b101df5ffd29d9a5c27cbe09f934805da3fe597809b265509dccfd8ad787da3a0fea3b7fd6dd1e2a3873f9c949f784ebab044ed10d4465c3511a181d195792f9ea0f3fa736d6ebd97c5ac7dd0fbf9b7d9415803b32decf68b3fedf21cf7d96ecd79a0dc295ecf9483869abefb880f5705db48d4618f9342be34315e2a8cef1c5e259aa0b156485e9a88405dd3febefb5d3c4b83cc1ae7acdb1ee89a612fe5a6dc2076d1a0f3ca5272c60d4a1d4a8ce7565df4cfc1a65041b1665dc1a92318d34a9f4219eda0444d3668c18e6c1f08858d73268b6669da3667fcda189643dd9be9bccc2f6163a02ad6d9fedbad36639b09b6ed28b6fed16cf0bc0d8958be329042f2c64ff44997a0e4dab3bc8bed2bd91e776ba9da73da1f5a1beae7cda4058f99ebbbd358997105a0293c06f563a08f0f6071c8b4c60ceeb65072687de230c98a50fe0a8fd01d1ecea02598be2cecd87e358229ee78df39f068c5d68349312192ab641918302e46e696a04d1606753ebe376641e6aef19b537035d0032ebe675e7771f42982df2299ef4ea0f997a27f8e68094b8274c4e1b8e44bb7671eefdfa16adac4a11665e415decc06a020a475d7c88862cd40f41d49748463369d23b538a169334eff919bac7e703d46a0a3bb1213c33c692f425e4b6e3c8a6b03737971448fb57aeb38c2e568b35451aea049b1876c5b021e3bbad1a6402d5c4dd19c84d8af78bbaafc80a83fa2dbaac15480";
      l3StateProof[1] = hex"f90211a0a9b2d6bf50ce96de2c1ded8d1df29f6d65ba0d502414fcb74b19178959788b90a000c1185a5549800d68a6436ac5b1d68d2f7ae501d0315ce201251a96e33b8aaaa0f23b49ca564e29b5ab01201e9011907db2bc117ac9446c74eaadcfa34dcc566ca0ccdacb250d358ac3894c24ee08b3711f256f05ed8ca1bc2dc651290bc7c3634ea013b958ea8795f52bf8cf3211e8f4aa2fdf4ca09b2c5105966ec535c3f878dce9a0d8a3b1725813d05583188f84b0911818f29fc391a18b3954ed2beffe134cee2aa0ea0a51b67ead2c59ec0048965428e02ee237101f7d1348d4447558fbbf473ab0a0c2199bc2655aecc3b81d79747473098636a11523f20012433f6675387fcf74f4a051ea97f5f90fbbe575374c23d620a31736b9fffeb23c5612362849e7c40b2910a0203163faacb27f48eec072de4d8c7385339f0f190759df1d4d53aed34301d27ea0b2733ed738b861246f6887de6895c9f68bdf1af35133cf8b22652c118b530650a05f11eb594055d25d22823a1f82465e0bce4eb92dc7875b10d76b842e9dafbd3aa0c3265c5f8669ab306f524affb55e2fb0389451b0674c1ac727ba92b6c728c429a0661f68f04088b40b805ce9fc880a2deccdad8a40bcf69b53d007eecab6106247a0fecd9fe7feddcc00ab1cef39b44c46d271ec91e9d6ad43eeae88429cc1467c1da060dc562e97de8216afe0ad90120cdeaf0e28ca2dec8a7e7021dcfb4aa360f34280";
      l3StateProof[2] = hex"f90211a08e382e37b9f70ab9b53fe27c7dee6aba2bfeb05baa6330524a8785a6da3ab1aaa039db323538491db05acf21befd60051a4cb153aea76cf668de9d57dd44e5e485a06c6fe1e17bf9aca52fb8fe572d6f978a6f7191e60a57fac3d7eb810e34e02718a0984c29d9b3306f7af5be9b05d969b5228b4ee5738231e0b0ebaa490fd5cf8041a06df1346d617995512f2790941836a4a6df15e087c5d7bfefbd91ff216f267264a0c6e95475d5bdd6cb210aaaeec7c01d9630d2265f03ac83977d24a47e51b2b926a00de882a23c5a3b72e7604586af53bcc1a7e969ad292e550e09ebdb24df785a58a00974316928dc1e0630d2010b0d30dff010a2dbfd9a7305d4f758c1b029d9de11a0012d60ae0b32f8a7daa87741e69ece5cc55f0bfda405d02633b0b407736b68f7a07173341bc1f191f24deeb097264e8635d9f7e6883707d0621502493eaa3c92eaa00f8954ade17625bbba1d57e1d4a902218a6eed2b082b18c06a8e108143ecf254a088577f0da84c534f83e72b1bda40fd207f9972b3bb6829cf6d1a1bea5d7cc8b2a07ca2e37eadcae67bf347eea9e3e469363eb3e5e84c28ff577b7f84e04a8c445fa0b1f8563b50a5095a96aff7a3f9642b21171c3130e54d27ed32a0ec9beb5e2d4aa04073c6f045e0794f512306ca662d87cf3b0c79fece7b10f1bc4cd144c3d38221a03a23441aa99e8c52ce88a5fe63e305d895a355973ce497149c137a93c0db083280";
      l3StateProof[3] = hex"f90211a0358ab3d6b0dd898a0cc09e8955e1b542724fb9b5a4511b3fcbec7497091313c5a0d8a94c8c2b48299a2cac5aa8f11272b205670e8215650c3b7e7d9abccb50c439a0ab5db2c4c456f9d697cfbc1b30aa71d5ca5ae6fd51d906dfd38529c82c951359a0b3f735dd04a4fb755f374187c2fbe5b965f370950cf8bc110f32072077e58ac2a0d6b9df6f0aabc7844a472b1f7b643a4e921db65560287062e66a11de3bcc2cb0a08b6afa42522ba496da85664935f5ac367ee54d24dd36a8b924eab1cf19d9df7da009406ae437eb4f728be753ce1f630d010e447f98907d160301b7d061d5580266a052d69c812fc3ec51ccaa00a14d0581eee3bbf51b136a5d4464c222908506c826a05ba91ed4642a53a80f788c0b0734fc1170e111e1f6e35b3ff1fd39f99b8cc97aa05cbb9eb0d9bf4edf3f0e65f837008f2722945311d95311df4d61d58b7ee6e80ca0dfbe14b0b67fb277840dfeba2a5650ac942a4e8139bd93e41af09afa20eee773a04187d3310330dc673cddc898d9629a4abacd5dca39e447308c1f2aad1273741da067a79785dce3558315d97795a41a5c9b462e9b849fe3276ee668d9d5f83c51ffa0ff355dbce6527e5c4477981ceb133f1d9448cfda405e8b7351e8fb52b370d058a06940a5deabbc3a315e5260348146c34845899e6cb66af9298c33d5d810443e4aa05511cdb9e6cfb047f651d665717d454cdb26628058a9bff516f5cc4be13c7be080";
      l3StateProof[4] = hex"f89180a07e2405e4cc85936f0809491f23f044267b7fbab91b41ccb0bc19e44e6437e32180a08c130c26d39c54a166c27197e721254f85f8a32e375d111e297bbe27594e0e808080a0018775a5526fdab4587372815b5d7b4dc6e0932da195d9468c0e617fc613af0480808080808080a0a404d300c519b2618c4f211fc502bf52aa752c2c3031e18d16da35faeb993ebe8080";
      l3StateProof[5] = hex"f8679e3d67fe17ae5aca147d12943bf69743e4cd4b510c77dd52d6766711579b59b846f8440180a06ed27f2c19fa35981d02009a33478e05e4c24988dcdfabc002ffeb215fd2718ca05285d5222a53e6b3858df2c09b272bcbe674ab20b2c16bbdac2bc31eaf4720a9";

      bytes[] memory historyProverStorageProof = new bytes[](3);
      historyProverStorageProof[0] = hex"f90211a08096caaf50bfb8630ba99a80260d04a5d05ca1f24ca8fcd680177ccc6605da18a02cb48a97b627fd3c887cac7b8c520c96fd28ba644a2ad1d4fa6d96c024e65165a0b3aa792d4db5f1e58cf7509be0e435f88adf0e96c430d704a02a6486cd4c5f28a084c3ab237a2c6fb338def5384df913e42291ccdd37efc0e90908b3e335c18351a0f321ad192288eda00908814557ee19f83d85329385682170b1b603f7c6b25645a089ad2ea2542392188a0ce08d935affe50a9211fee20314e68804f8e9c9ec916da06c9fee149ded656b0a7953ee94abbb1ee2a2bb9f1249b607da323a84d8ee3271a043e7b2ecccad55bc81289f46d41ddab101f2b364fa0fbbacb3f46f77cf03005fa0deb355063624253b63940151e04ae194843f2d0249aecec4dcafc8460771ff70a05dcedf1c696c4f284a1a9ccf84f79fe62d3e7d169a3a2c59f1a7623e5aa2e490a0996f7966c75548226c74585d94300b25632f68f9501aa72cf33e274a43019841a02261a9e50e9ee2eaa66b56f5f793ad052a80accd718631fcbc293ec31341e2e6a026876a30c99e0cba236f0105ae6a8777cf75c4fab175f5bb10f12dd9b54b9b4ba030f1ec8139182ca9c0cf23cd5904125f80f6dafc619e9e8696fcdfbe30f3aea7a06e61ac4b71218732f48426508e28c5a70a06e0b7ce32c4fc8db0abb8a614ad77a067a6b5e61fa6eb29d63c2cc8559ceb6fa93a77b4c00f0845f067d000dfd1032a80";
      historyProverStorageProof[1] = hex"f8d18080808080a0ac6d5013bddce729b65519246d7034e6d2bdf7ff0c4773abf5b3d0ce1e406b27a013a12d097b836e544dfbc42a870d17fe958aeaf5a087732899dccfed3e6179cda077cea2d5a52879a51c91dbfdd48807a40c77ba9eac0429c58e902155c14683898080808080a0640e3741b59354a44266d0ff873c69053ad26d92339650d548d37145c198fbcfa06264080c37887e14a4c6a1f79e8e7794dc3653108f26821c54bb9a6ec32469a9a0a40aecc8a074341eb8fb0589b50323d29b72e0509991eec2c6b652f21282104f80";
      historyProverStorageProof[2] = hex"f843a020a30c2b0d86b7e1634bbc166aadc4b82a25641d99154433b459cace3b27820ba1a08e38b4dbf6b11fcc3b9dee84fb7986e29ca0a02cecd8977c161ff7333329681e";

      bytes[] memory txProof = new bytes[](2);
      txProof[0] = hex"f851a0ca62e9753670e9336f817e00197bc91d05ee388bb65951599131bcfdd89f223680808080808080a07fc420843a16aacaaeeac410319611436870ab628da07640d96610919098564f8080808080808080";
      txProof[1] = hex"f87330b870f86e158512bfb19e608301f8dc94c083e9947cf02b8ffc7d3090ae9aea72df98fd4789056bc75e2d63100000801ca0a254fe085f721c2abe00a2cd244110bfc0df5f4f25461c85d8ab75ebac11eb10a030b7835ba481955b20193a703ebc5fdffeab081d63117199040cdf5a91c68765";

      bytes memory txIndex = hex"80";

      claimer.claim(
        blockHeader,
        txIndex,
        l3StateRoot,
        l3StateProof,
        historyProverStorageProof,
        txProof
      );
    }
}
